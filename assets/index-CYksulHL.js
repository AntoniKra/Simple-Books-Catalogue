(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))s(o);new MutationObserver(o=>{for(const n of o)if(n.type==="childList")for(const f of n.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&s(f)}).observe(document,{childList:!0,subtree:!0});function r(o){const n={};return o.integrity&&(n.integrity=o.integrity),o.referrerPolicy&&(n.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?n.credentials="include":o.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(o){if(o.ep)return;o.ep=!0;const n=r(o);fetch(o.href,n)}})();async function T(t){const e=await fetch(`https://openlibrary.org/search.json?q=${t}`);if(!e.ok)throw new Error("Network error");return await e.json()}const m=t=>({title:t.title,author:t.author_name?.[0]||"Unknown",year:t.first_publish_year||"Unknown",cover:t.cover_i?`https://covers.openlibrary.org/b/id/${t.cover_i}-M.jpg`:"https://placehold.co/180x280?text=No+Cover"}),q=(t,e)=>{let r;return(...s)=>{clearTimeout(r),r=setTimeout(()=>{t.apply(null,s)},e)}},g=(t,e,r)=>`
  <article class="book-card">
    <div class="book-header">
      <img src="${t.cover}" alt="${t.title}" />
      <button class="btn-heart" data-index="${e}">
        ${r?"‚ù§Ô∏è":"ü©∂"}
      </button>
    </div>
    <div class="book-info">
      <h3>${t.title}</h3>
      <p>${t.author}</p>
      <p>${t.year}</p>
    </div>
  </article>
`,x=()=>'<div class="spinner"></div>',h=document.querySelector("#search"),l=document.querySelector("#search-input"),c=document.querySelector("#book-section"),u=document.querySelector("#favorite-section"),y=document.querySelector("#tab-books"),b=document.querySelector("#tab-favorites"),p=document.querySelector(".glass-window");let v=[],i=JSON.parse(localStorage.getItem("favoriteBooks"))||[];async function d(t){try{c.innerHTML=x();const e=await T(t);if(c.innerHTML="",!e.numFound){c.innerHTML='<p class="info-text">No books found üòû</p>';return}v=e.docs.slice(0,10),L()}catch(e){console.error(e),c.innerHTML='<p class="info-text">Connection error ‚ö†Ô∏è</p>'}}function L(){c.innerHTML=v.map((t,e)=>{const r=m(t),s=i.some(o=>o.title===r.title);return g(r,e,s)}).join("")}function k(){if(!i.length){u.innerHTML='<div class="info-text"><p>No favorites yet üòû</p></div>';return}u.innerHTML=i.map((t,e)=>g(t,e,!0)).join("")}const w=()=>{localStorage.setItem("favoriteBooks",JSON.stringify(i)),k()};function a(t){const e=t==="books";y.classList.toggle("active",e),b.classList.toggle("active",!e),c.classList.toggle("active",e),u.classList.toggle("active",!e),p&&(p.classList.toggle("mode-books",e),p.classList.toggle("mode-favorites",!e)),e||k()}h.addEventListener("submit",async t=>{t.preventDefault();const e=l.value.trim();e&&(a("books"),await d(e))});l.addEventListener("input",q(async t=>{const e=t.target.value.trim();e.length<3||(a("books"),await d(e))},500));h.addEventListener("submit",async t=>{t.preventDefault();const e=l.value.trim();if(!e)return alert("Input book name!");a("books"),await d(e),l.value=""});c.addEventListener("click",t=>{const e=t.target.closest(".btn-heart");if(!e)return;const r=m(v[e.dataset.index]),s=i.findIndex(o=>o.title===r.title);s!==-1?(i.splice(s,1),e.innerText="ü©∂"):(i.push(r),e.innerText="‚ù§Ô∏è"),w()});u.addEventListener("click",t=>{const e=t.target.closest(".btn-heart");e&&(i.splice(e.dataset.index,1),w(),L())});y.addEventListener("click",()=>a("books"));b.addEventListener("click",()=>a("favorites"));d("antoni");
