(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const r of o)if(r.type==="childList")for(const l of r.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(o){const r={};return o.integrity&&(r.integrity=o.integrity),o.referrerPolicy&&(r.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?r.credentials="include":o.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function i(o){if(o.ep)return;o.ep=!0;const r=n(o);fetch(o.href,r)}})();async function k(t){const e=await fetch(`https://openlibrary.org/search.json?q=${t}`);if(!e.ok)throw new Error("Network error");return await e.json()}const p=t=>({title:t.title,author:t.author_name?.[0]||"Unknown",year:t.first_publish_year||"Unknown",cover:t.cover_i?`https://covers.openlibrary.org/b/id/${t.cover_i}-M.jpg`:"https://placehold.co/180x280?text=No+Cover"}),v=(t,e,n)=>`
  <article class="book-card">
    <div class="book-header">
      <img src="${t.cover}" alt="${t.title}" />
      <button class="btn-heart" data-index="${e}">
        ${n?"‚ù§Ô∏è":"ü©∂"}
      </button>
    </div>
    <div class="book-info">
      <h3>${t.title}</h3>
      <p>${t.author}</p>
      <p>${t.year}</p>
    </div>
  </article>
`,T=()=>'<div class="spinner"></div>',w=document.querySelector("#search"),f=document.querySelector("#search-input"),c=document.querySelector("#book-section"),a=document.querySelector("#favorite-section"),h=document.querySelector("#tab-books"),m=document.querySelector("#tab-favorites");let u=[],s=JSON.parse(localStorage.getItem("favoriteBooks"))||[];async function y(t){try{c.innerHTML=T();const e=await k(t);if(c.innerHTML="",!e.numFound){c.innerHTML='<p class="info-text">No books found üòû</p>';return}u=e.docs.slice(0,10),g()}catch(e){console.error(e),c.innerHTML='<p class="info-text">Connection error ‚ö†Ô∏è</p>'}}function g(){c.innerHTML=u.map((t,e)=>{const n=p(t),i=s.some(o=>o.title===n.title);return v(n,e,i)}).join("")}function b(){if(!s.length){a.innerHTML='<div class="empty-state"><p>No favorites yet üòû</p></div>';return}a.innerHTML=s.map((t,e)=>v(t,e,!0)).join("")}const L=()=>{localStorage.setItem("favoriteBooks",JSON.stringify(s)),b()};function d(t){const e=t==="books";h.classList.toggle("active",e),m.classList.toggle("active",!e),c.classList.toggle("active",e),a.classList.toggle("active",!e),e||b()}w.addEventListener("submit",async t=>{t.preventDefault();const e=f.value.trim();if(!e)return alert("Input book name!");d("books"),await y(e),f.value=""});c.addEventListener("click",t=>{const e=t.target.closest(".btn-heart");if(!e)return;const n=p(u[e.dataset.index]),i=s.findIndex(o=>o.title===n.title);i!==-1?(s.splice(i,1),e.innerText="ü©∂"):(s.push(n),e.innerText="‚ù§Ô∏è"),L()});a.addEventListener("click",t=>{const e=t.target.closest(".btn-heart");e&&(s.splice(e.dataset.index,1),L(),g())});h.addEventListener("click",()=>d("books"));m.addEventListener("click",()=>d("favorites"));y("javascript");
